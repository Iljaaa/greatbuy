<!doctype html />
<html>
	<head>
	<script type="text/javascript" src="plate.js"></script>
	
		<script type="text/javascript" src="org.js"></script>
		<script type="text/javascript" src="rectangle.js"></script>
		<script type="text/javascript" src="string.js"></script>
		<script type="text/javascript" src="title.js"></script>
		<script type="text/javascript" src="layout.js"></script>
		
		
		<script>
		
			var obj;
			
			// размеры плитки
			var plateSize = {
				width	: 300,
				height	: 300
			};
			
			// размеры пола
			var floreSize = {
				width	: 1000,
				height	: 1000
			}
			
		
			function ready ()
			{
				// 
				var ddd = calckPlateBySize (floreSize.width, floreSize.height, plateSize.width, plateSize.height, 0);
				
				
				var data = {
					width		: (plateSize.width - 5), 
					height		: (plateSize.height - 5),
					name		: 'superRect',
					// fillColor	: 
				};				
				
				var title = new Title({
					cols	: ddd.cols,
					rows	: ddd.rows,
					rect	: new Rectangle(data),
					dif		: 5
				});
				
				
				obj = new Org ("fild");
				
				var zoomKoef = calckZoomKoef(title.getWidth(), title.getHeight(), (obj.getWidth() - 70), (obj.getHeight() - 70));
				
				
				
				
				
				
				var floarLayout = new Layout ();
				floarLayout.setLeft (10);
				floarLayout.setTop (10);
				floarLayout.setZoom (zoomKoef);
				
				
				var rect = new Rectangle({
					width		: floreSize.width, 
					height		: floreSize.height,
					name		: 'flore',
				})
				
				floarLayout.addElement (rect);
				
								
				
				
				
				
				
				var layout = new Layout ();
				layout.setLeft (10);
				layout.setTop (10);
				
							
				// расчитываем коэф
				// var k = calckZoomKoef (title.getWidth(), title.getHeight(), obj.getWidth() - 100, obj.getHeight() - 100);
				layout.setZoom (zoomKoef);						
				layout.addElement (title);
				
				var str = new String({
					left		: title.getZoomWidth()+20,
					top			: parseInt(title.getZoomHeight() * 0.5),
					name 		: "str",
					fontSize	: 20,
					text		: "33333"
				});
				
				floarLayout.addElement (str);
				
				
				obj.addLayout (floarLayout);
				obj.addLayout (layout);
				obj.draw ();
			}		
		</script>
	</head>
	<body onload="ready()">
		<canvas width="900" height="600" id="fild" style="border: solid 1px orange;"></canvas>
	</body>
</html>